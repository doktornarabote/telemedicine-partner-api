# Текстовая консультация

## Запрос на консультацию

`POST /api/v1/writingrequest/start-writing` вернёт информацию о запущенной консультации.

### Запрос:

Имя | Тип | Описание
--- | --- | ---
doctorId | integer | уникальный идентификатор врача
message | string | текстовое сообщение для врача (обращение/описание проблемы)
patientFullName | string | фио пациента
cost | [Money](./contracts.md#money) | стоимость выбранной консультации. Необходимо для сверения последних данных о стоимости консультаций от врача со стоимостью, показанной пациенту.
attachment | file | (optional) информация с информацией о пациенте (может послужить предметом обсуждения во время консультации). Содержимое multipart/form-data. Максимальный размер вложения 10 МБ.
beginAtUtc | datetime | (optional) время начала консультации. Если параметр не указан, то консультация начнется сразу.

### Ответ:

[Объект Текстовая консультация](./contracts.md#writing)

```json
{
  "item": {
    //.. объект текстовая консультация
  }
}
```

## Получение информации о консультации

`GET /api/v1/writingrequest/get/{id}` вернёт информацию о консультации.

### Запрос

Имя | Тип | Описание
--- | --- | ---
id | string | уникальный идентификатор консультации вида текстовая консультация

### Ответ

[Объект Текстовая консультация](./contracts.md#writing)

```json
{
  "item": {
    //.. объект текстовая консультация
  }
}
```

## Поиск по консультациям

`GET /api/v1/writingrequest/get-all` вернёт список консультаций.

### Запрос

Имя | Тип | Описание
--- | --- | ---
ids | array | уникальные идентификаторы консультации вида текстовая консультация
hasUnreadMessages | boolean | наличие непрочитанных сообщений
order | string | сортировать по полю (Created, Updated)
asc | boolean | сортировать по возрастанию
limit | integer | максимальное кол-во записей в ответе
offset | integer | смещение (сколько записей пропустить)

### Ответ

[Объект Текстовая консультация](./contracts.md#writing)

```json
{
  "items": [
    {
      //.. объект текстовая консультация
    }
  ],
  "count": 10,
  "totalCount": 15
}
```

## Проверка наличия непрочитанных врачом сообщений

`GET /api/v1/writingrequest/has-unread-messages/{id}` вернёт информацию о непрочитанных врачом сообщений.

### Запрос

Имя | Тип | Описание
--- | --- | ---
id | string | уникальный идентификатор консультации вида текстовая консультация

### Ответ

```json
{
  "hasUnreadMessages": true
}
```

## Отмена запроса на консультацию

`POST /api/v1/writingrequest/cancel` вернёт информацию об отменяемой консультации.

### Запрос:

Имя | Тип | Описание
--- | --- | ---
requestId | integer | уникальный идентификаторы консультации вида текстовая консультация
reason | string | причина

### Ответ:

[Объект Текстовая консультация](./contracts.md#writing)

```json
{
  "item": {
    //.. объект текстовая консультация
  }
}
```

## Прерывание консультации

`POST /api/v1/writingrequest/abort` вернёт информацию о прерываемой консультации.

### Запрос:

Имя | Тип | Описание
--- | --- | ---
requestId | integer | уникальный идентификаторы консультации вида текстовая консультация
reason | string | причина

### Ответ:

[Объект Текстовая консультация](./contracts.md#writing)

```json
{
  "item": {
    //.. объект текстовая консультация
  }
}
```

## Добавление отзыва о текстовой консультации

`POST /api/v1/writingrequest/patient-feedback` вернёт информацию о консультации.

### Запрос

Имя | Тип | Описание
--- | --- | ---
requestId | string | уникальный идентификатор текстовой консультации
rate | float | оценка консультации; допустимые значения от 1 до 5
comment | string | комментарий к оценке

### Ответ

[Текстовая консультация](./contracts.md#writing)

```json
{
  "item": {
    //.. объект текстовая консультация
  }
}
```
